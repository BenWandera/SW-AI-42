# Crane Cloud Deployment Configuration
# Documentation: https://docs.cranecloud.io

name: ecowaste-ai-api
type: web

# Build configuration
build:
  dockerfile: Dockerfile
  context: .

# Runtime configuration
run:
  port: 8000
  workers: 1
  
# Environment variables (set these in Crane Cloud dashboard)
env:
  - ENVIRONMENT=production
  - PYTHONUNBUFFERED=1
  - HF_HOME=/app/hf_cache
  - TRANSFORMERS_CACHE=/app/hf_cache

# Resource limits (adjust based on your Crane Cloud plan)
resources:
  memory: 2Gi    # 2GB RAM - needed for ML models
  cpu: 1000m     # 1 CPU core
  
# Health check
health_check:
  path: /
  interval: 30
  timeout: 10
  
# Persistent storage for user data and model cache
volumes:
  - name: model-cache
    mount_path: /app/hf_cache
    size: 5Gi
  - name: user-data
    mount_path: /app/data
    size: 1Gi
